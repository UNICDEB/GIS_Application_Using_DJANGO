<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Route Map</title>
    <link rel="stylesheet" href="https://js.arcgis.com/4.26/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.26/"></script>
    <style>
        #viewDiv {
            width: 100%;
            height: 100vh;
        }
    </style>
</head>
<body>
    <div id="viewDiv"></div>

    <script>
        require([
            "esri/Map",
            "esri/views/MapView",
            "esri/rest/Route",
            "esri/Graphic",
            "esri/geometry/Polyline",
            "esri/symbols/SimpleLineSymbol",
            "esri/layers/GraphicsLayer"
        ], function(Map, MapView, Route, Graphic, Polyline, SimpleLineSymbol, GraphicsLayer) {

            // Initialize the map
            var map = new Map({
                basemap: "streets-navigation-vector"
            });

            var view = new MapView({
                container: "viewDiv",
                map: map,
                center: [73.8567, 15.2993], // Default center (modify as needed)
                zoom: 12
            });

            // Graphics Layer for route
            var routeLayer = new GraphicsLayer();
            map.add(routeLayer);

            // Function to draw the route
            function drawRoute(startPoint, endPoint) {
                Route.solve({
                    url: "https://route.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World/solve", // Replace with your routing service URL
                    params: {
                        stops: [startPoint, endPoint],
                        outSpatialReference: {wkid: 4326}
                    }
                }).then(function(data) {
                    if (data.routeResults.length > 0) {
                        var routeGeometry = data.routeResults[0].route.geometry;

                        // Create a line symbol for the route
                        var routeSymbol = new SimpleLineSymbol({
                            color: [0, 255, 0], // Green line
                            width: 4
                        });

                        // Add route graphic to the map
                        var routeGraphic = new Graphic({
                            geometry: routeGeometry,
                            symbol: routeSymbol
                        });
                        routeLayer.add(routeGraphic);

                        // Center the map to the route
                        view.goTo(routeGeometry.extent.expand(1.5));
                    } else {
                        console.error("No route found");
                    }
                }).catch(function(error) {
                    console.error("Error solving route:", error);
                });
            }

            // Example coordinates
            var startLocation = {
                type: "point",
                longitude: 73.8567, // Starting longitude
                latitude: 15.2993    // Starting latitude
            };

            var endLocation = {
                type: "point",
                longitude: 73.94585, // Ending longitude
                latitude: 15.58690    // Ending latitude
            };

            // Draw the route between start and end locations
            drawRoute(startLocation, endLocation);
        });
    </script>
</body>
</html>
